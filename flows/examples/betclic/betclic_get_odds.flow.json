{
  "flow_id": "betclic_get_odds",
  "site": "betclic.fr",
  "version": 1,
  "params": {
    "match": { "type": "string", "required": true }
  },
  "returns": {
    "home_odds": { "type": "number" },
    "draw_odds": { "type": "number" },
    "away_odds": { "type": "number" },
    "match_found": { "type": "boolean" }
  },
  "steps": [
    {
      "id": "s_001",
      "action": "navigate",
      "description": "Go to live betting page",
      "url": "https://www.betclic.fr/live"
    },
    {
      "id": "s_002",
      "action": "wait",
      "description": "Wait for live events to load",
      "target": { "css": ".live-events-list, .sports-events-list" },
      "timeout_ms": 15000
    },
    {
      "id": "s_003",
      "action": "click",
      "description": "Find and click on the target match",
      "target": {
        "strategy": "find_by_text",
        "text": "{{params.match}}",
        "container": ".live-events-list"
      }
    },
    {
      "id": "s_004",
      "action": "wait",
      "description": "Wait for match odds to load",
      "target": { "css": ".market-outcomes, .odds-container" },
      "timeout_ms": 10000
    },
    {
      "id": "s_005",
      "action": "extract",
      "description": "Extract home team odds",
      "target": {
        "css": ".outcome-home .odds-value, .market-outcomes > :first-child .odds",
        "xpath": "//div[contains(@class,'outcome')][1]//span[contains(@class,'odds')]",
        "dom_neighborhood": "first odds value in the match market"
      },
      "save_as": "home_odds"
    },
    {
      "id": "s_006",
      "action": "extract",
      "description": "Extract draw odds",
      "target": {
        "css": ".outcome-draw .odds-value, .market-outcomes > :nth-child(2) .odds",
        "xpath": "//div[contains(@class,'outcome')][2]//span[contains(@class,'odds')]",
        "dom_neighborhood": "middle odds value in the match market"
      },
      "save_as": "draw_odds"
    },
    {
      "id": "s_007",
      "action": "extract",
      "description": "Extract away team odds",
      "target": {
        "css": ".outcome-away .odds-value, .market-outcomes > :last-child .odds",
        "xpath": "//div[contains(@class,'outcome')][3]//span[contains(@class,'odds')]",
        "dom_neighborhood": "last odds value in the match market"
      },
      "save_as": "away_odds"
    }
  ],
  "returns_mapping": {
    "home_odds": "{{extracted.home_odds}}",
    "draw_odds": "{{extracted.draw_odds}}",
    "away_odds": "{{extracted.away_odds}}",
    "match_found": true
  }
}
